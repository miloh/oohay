# makefile for geda:gaf projects
#
# schematic:
# generate schematic and populate it with all the symbols in the sym directory

# board: 
# makefile can  be used to process schematics into boards using refdes_renum
# and gsch2pcb....  jjj

schematic: 
	@echo "set the ting to things"

board: sim_uc.sch sim_phys_out.sch sim_ether.sch sim_pwr.sch \ 
	sim_phys_in.sch packages/* shematics/* 
	refdes_renum $^
	gsch2pcb -v  $^ -o $@

clean:
	rm -f *~ *- *.backup *.new.pcb *.png *.bak *.gbr *.cnc

destroy_pcb: clean
	@bash -c 'echo "Are you sure? cuz this is gonna blow up all your pcb \
	shit."; read answer; if [[ "$$answer" == *yes* ]]; then rm -v -f *.cmd \
	*.pcb *.net; fi'

#SCHEMATIC_FILE=$1
#DATE=`date +"%b-%d-%Y"`
#echo $DATE
#AUTHOR="`git config --global -l | grep user.name | cut -d "=" -f2`"
#echo $AUTHOR
#REV=`git log -1 --format=%h`
#echo $REV

#sed -i "s/\(date=\).*/\1$DATE/" $SCHEMATIC_FILE
#sed -i "s/\(auth=\).*/\1$AUTHOR/" $SCHEMATIC_FILE
#sed -i "s/\(fname=\).*/\1$SCHEMATIC_FILE/" $SCHEMATIC_FILE
#sed -i "s/\(rev=\).*/\1$REV/" $SCHEMATIC_FILE
